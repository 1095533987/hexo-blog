<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Evan Hon blogs"><title>Linux使用笔记（Manjaro DDE） | DRAW LIFE</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Linux使用笔记（Manjaro DDE）</h1><a id="logo" href="/.">DRAW LIFE</a><p class="description">The world is made up of code</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/libraries/"><i class="fa fa-book"> 藏书</i></a><a href="/quotations/"><i class="fa fa-pencil-square-o"> 语录</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Linux使用笔记（Manjaro DDE）</h1><div class="post-meta">May 7, 2019<span> | </span><span class="category"><a href="/categories/notes/">笔记</a></span></div><div class="post-content"><p>Linux发行版实在是太多了，之前尝试过了Ubuntu、CentOS、Debian等等许多的发行版，用过了KDE、Xfce等一些桌面环境，感觉都不是很适合自己，之后了解到Deepin这个发行版，得知是国人精心打造的产物，而且桌面环境做得超赞，有心使用，但可能是自己的电脑是ATI+Intel双显卡的原因，导致该发行版安装后卡在桌面，试过网上的一些办法，都没什么效果，只得暂时放下转而选择先体验Manjaro DDE 发行版。<br><a id="more"></a></p>
<h3 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h3><p>设备：Lenovo XIAOXIN V4000<br>显卡：AMD &amp; Intel<br>CPU：Intel core i7<br>系统：Manjaro 18.0.4 Illyria<br>DE：Deepin 15.10</p>
<h3 id="双显卡问题"><a href="#双显卡问题" class="headerlink" title="双显卡问题"></a>双显卡问题</h3><h4 id="NVIDIA-（由于电脑是ATI显卡-所以暂未尝试）"><a href="#NVIDIA-（由于电脑是ATI显卡-所以暂未尝试）" class="headerlink" title="NVIDIA （由于电脑是ATI显卡 所以暂未尝试）"></a>NVIDIA （由于电脑是ATI显卡 所以暂未尝试）</h4><ol>
<li>bumblebee    </li>
<li>Nvidia Prime</li>
</ol>
<h4 id="AMD-ATI"><a href="#AMD-ATI" class="headerlink" title="AMD/ATI"></a>AMD/ATI</h4><p>闭源驱动：安装官方提供的闭源驱动</p>
<p>开源驱动：<br><code>sudo cat /sys/kernel/debug/vgaswitcheroo/switch  # 查看切换状态        DIS独显     IGD集显</code></p>
<p>如果文件不存在，可能存在的问题：</p>
<ol>
<li>闭源驱动卸载未卸载(不彻底)</li>
<li>内核不支持/未启用VGA_SWITCHEROO</li>
</ol>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">xrandr </span><span class="built_in">--listproviders</span>            <span class="comment"># 使用xrandr显示可支持的显卡</span></span><br><span class="line"></span><br><span class="line"><span class="string">xrandr </span><span class="built_in">--setprovideroffloadsink</span> 1 0  <span class="comment"># 设置此处后可以使用DRI_PRIME为某个应用选择使用哪张显卡</span></span><br><span class="line"></span><br><span class="line"><span class="string">glxinfo </span>| <span class="string">grep </span><span class="string">"OpenGL renderer"</span>      <span class="comment"># 查看正在使用的显卡</span></span><br><span class="line"></span><br><span class="line"><span class="string">DRI_PRIME=</span>1 <span class="string">glxinfo </span>| <span class="string">grep </span><span class="string">"OpenGL renderer"</span>  <span class="comment"># 加上DRI_PRIME=1参数  为glxinfo启用独显</span></span><br></pre></td></tr></table></figure>
<h3 id="应用不支持fcitx中文输入法（可尝试）"><a href="#应用不支持fcitx中文输入法（可尝试）" class="headerlink" title="应用不支持fcitx中文输入法（可尝试）"></a>应用不支持fcitx中文输入法（可尝试）</h3><p>打开对应命令文件，如 /usr/bin/wps<br>头部加入<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">XMODIFIERS</span>=<span class="string">"@im=fcitx"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GTK_IM_MODULE</span>=<span class="string">"fcitx"</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">QT_IM_MODULE</span>=<span class="string">"fcitx"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="EFI"><a href="#EFI" class="headerlink" title="EFI"></a>EFI</h3><p>GPT+EFI 多次重复安装Linux不同发行版 导致 EFI多出来很多启动项</p>
<p>解决方案：</p>
<ol>
<li>efibootmgr</li>
<li>直接挂载UEFI分区 删除启动项对应文件夹 (没尝试过…)</li>
</ol>
<h3 id="SS-SSR代理"><a href="#SS-SSR代理" class="headerlink" title="SS/SSR代理"></a>SS/SSR代理</h3><ol>
<li>全局：直接在deepin DE网络中配置代理</li>
<li>终端：<br><code>export http_proxy=&quot;http://127.0.0.1:12333&quot;    #     or   https_proxy</code></li>
</ol>
<h3 id="打包压缩"><a href="#打包压缩" class="headerlink" title="打包压缩"></a>打包压缩</h3><p>tar是Linux下最常用打包程序</p>
<ol>
<li>基本用法</li>
<li>tar调用 (tar在打包的同时提供调用其他压缩程序的功能)，如<code>tar -xzf xxx.gzip  #  -z参数代表指定调用gzip压缩程序</code> </li>
</ol>
<h3 id="启动器图标"><a href="#启动器图标" class="headerlink" title="启动器图标"></a>启动器图标</h3><p>这两个路径下可以编辑</p>
<ol>
<li>/home/evan/.local/share/applications</li>
<li>/usr/share/applications</li>
</ol>
<h3 id="Chrome-Flash插件"><a href="#Chrome-Flash插件" class="headerlink" title="Chrome Flash插件"></a>Chrome Flash插件</h3><p>chrome不同于firefox，在chrome中是自带flash插件的，当需要更新flash插件时，只需要在地址栏输入<code>chrome://components</code>，然后找到Adobe Flash Player插件，检查更新即可。正常情况下这样即可，不过我遇到一个问题，更新完flash插件后，打开需要flash的网页仍旧显示插件过期，并且点击升级插件会提示点击右键运行插件，不过按着提示操作后没有任何反应。尝试了很多方法后无果，几近放弃，不过无意间看见<code>~/.config/google-chrome/PepperFlash/32.0.0.192/libpepflashplayer.so</code>这个文件（即flash插件）没有可执行权限，抱着死马当活马医的态度，执行命令<code>chmod +x ~/.config/google-chrome/PepperFlash/32.0.0.192/libpepflashplayer.so</code>，赋予libpepflashplayer.so文件可执行权限，再次尝试……终于出来了。</p>
<h3 id="pacman安装的软件包版本回退"><a href="#pacman安装的软件包版本回退" class="headerlink" title="pacman安装的软件包版本回退"></a>pacman安装的软件包版本回退</h3><p>我们在使用系统的过程中难免会遇到这样的问题，升级软件包后出现了一些问题或者是自己更喜欢以前的版本，这时候我们便不得不将已安装的软件包进行版本回退。pacman通常会将它下载的软件包放在系统<code>/var/cache/pacman/pkg</code>路径下，一般情况下pacman是不会清理这部分文件的，除非自己手动执行<code>pacman -Sc</code>，这个命令会保留软件包的当前有效版本，旧版本的软件包会被清理掉。我们要进行软件包版本回退，首先得在这个路径下找到软件包的旧版本，如果找不到可以到网上一些镜像源里下载到本地。之后需要执行命令<code>sudo pacman -U xxx.pkg.tar.xz</code>安装本地软件包。为了防止下次软件更新时再次将软件包升级，可以到<code>/etc/pacman.conf</code>修改添加<code>IgnorePkg=xxx</code>。</p>
<h3 id="pacman常用命令"><a href="#pacman常用命令" class="headerlink" title="pacman常用命令"></a>pacman常用命令</h3><h4 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h4><p>生成国内可用源列表：<br><code>$ sudo pacman-mirrors -i -c China -m rank</code><br>在弹出窗口中选择较快的源，让本地包数据库与远程软件仓库同步：<br><code>$ pacman -Syy   # 或者使用pacman -Syu同时进行同步软件库与更新系统到最新状态</code></p>
<h4 id="安装软件包"><a href="#安装软件包" class="headerlink" title="安装软件包"></a>安装软件包</h4><p>安装或者升级单个软件包，或者一列软件包（包含依赖包），使用如下命令：<br><code>pacman -S package_name1 package_name2</code><br>在不同的软件仓库中，一个软件包有多个版本（比如extra和testing）。可以选择一个来安装：<br><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S extra/<span class="keyword">package</span><span class="number">_n</span>ame</span><br><span class="line">pacman -S testing/<span class="keyword">package</span><span class="number">_n</span>ame</span><br></pre></td></tr></table></figure></p>
<p>你也可以在一个命令里同步包数据库并且安装一个软件包：<br><code>pacman -Sy package_name</code></p>
<h4 id="卸载软件包"><a href="#卸载软件包" class="headerlink" title="卸载软件包"></a>卸载软件包</h4><p>删除单个软件包，保留其全部已经安装的依赖关系<br><code>pacman -R package_name</code><br>删除指定软件包，及其所有没有被其他已安装软件包使用的依赖关系：<br><code>pacman -Rs package_name</code></p>
<h4 id="包数据库查询"><a href="#包数据库查询" class="headerlink" title="包数据库查询"></a>包数据库查询</h4><p>可以使用 -Q 标志搜索和查询本地包数据库。详情参见<br><code>pacman -Q --help</code><br>可以使用-S 标志搜索和查询远程同步的包数据库。详情参见<br><code>pacman -S --help</code></p>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><p>下载包而不安装它：<br><code>pacman -Sw package_name</code><br>安装一个本地包（不从源里）：<br><code>pacman -U /path/to/package/package_name-version.pkg.tar.gz</code><br>完全清理包缓存(/var/cache/pacman/pkg)：<br><code>pacman -Scc</code></p>
<h3 id="Manjaro无法识别USB存储设备"><a href="#Manjaro无法识别USB存储设备" class="headerlink" title="Manjaro无法识别USB存储设备"></a>Manjaro无法识别USB存储设备</h3><p>现象描述：Manjaro系统无法识别UBS存储设备，包含U盘和移动硬盘<br>问题确认：<br>1、看能否正常载入USB存储模块<br><code>sudo modprobe usb-storage</code><br>返回结果为：<br><code>modprobe: FATAL: Module usb-storage not found in directory /lib/modules/4.19.45-1-MANJARO</code><br>可以看到无法找到需要加载的usb-storage。查询/lib/modules目录：<br><code>ls /lib/modules</code><br>返回内容为：<br><code>4.19.49-1-MANJARO  extramodules-4.19-MANJARO</code><br>发现主要问题是需要加载的版本和实际的版本不一致。初步定位是ArchLinux滚动更新版本带来的问题。</p>
<p>2、查看正在运营的版本和已安装的版本<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ <span class="selector-tag">uname</span> <span class="selector-tag">-r</span></span><br><span class="line"><span class="selector-tag">4</span><span class="selector-class">.19</span><span class="selector-class">.45-1-MANJARO</span></span><br><span class="line">➜  ~ <span class="selector-tag">pacman</span> <span class="selector-tag">-Q</span> <span class="selector-tag">linux</span></span><br><span class="line"><span class="selector-tag">linux419</span> <span class="selector-tag">4</span><span class="selector-class">.19</span><span class="selector-class">.49-1</span></span><br><span class="line">➜  ~ <span class="selector-tag">cat</span> /<span class="selector-tag">proc</span>/<span class="selector-tag">version</span></span><br><span class="line"><span class="selector-tag">Linux</span> <span class="selector-tag">version</span> <span class="selector-tag">4</span><span class="selector-class">.19</span><span class="selector-class">.45-1-MANJARO</span> (builduser<span class="variable">@development</span>) (gcc version <span class="number">8.3</span>.<span class="number">0</span> (GCC)) <span class="selector-id">#1</span> <span class="selector-tag">SMP</span> <span class="selector-tag">PREEMPT</span> <span class="selector-tag">Wed</span> <span class="selector-tag">May</span> <span class="selector-tag">22</span> <span class="selector-tag">17</span><span class="selector-pseudo">:16</span><span class="selector-pseudo">:41</span> <span class="selector-tag">UTC</span> <span class="selector-tag">2019</span></span><br></pre></td></tr></table></figure></p>
<p>同时可以到Manjaro的内核设置页面进一步确认运行版本</p>
<p>确实存在实际与描述不符的问题。</p>
<p>解决方案：更新启动引导程序并重启<br><code>sudo update-grub</code><br>最终，问题解决。</p>
</div><div class="tags"><a href="/tags/experience/">经历</a><a href="/tags/Linux/">Linux</a></div><div class="post-nav"><a class="pre" href="/744267713.html">一次意外的趣味算法问题</a><a class="next" href="/2364295358.html">前端框架与库收集记录</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="https://evan-hon.netlify.app"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/front/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notes/">笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/read/">阅读</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/tool/" style="font-size: 15px;">工具</a> <a href="/tags/experience/" style="font-size: 15px;">经验</a> <a href="/tags/experience/" style="font-size: 15px;">经历</a> <a href="/tags/library/" style="font-size: 15px;">库</a> <a href="/tags/frame/" style="font-size: 15px;">框架</a> <a href="/tags/spider/" style="font-size: 15px;">爬虫</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/algorithm/" style="font-size: 15px;">算法</a> <a href="/tags/novel/" style="font-size: 15px;">小说</a> <a href="/tags/error/" style="font-size: 15px;">报错</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/3764231853.html">计算机字符编码</a></li><li class="post-list-item"><a class="post-list-link" href="/2764528646.html">从Integer和int看基本数据类型和包装类</a></li><li class="post-list-item"><a class="post-list-link" href="/2078135551.html">Lambda表达式和方法引用</a></li><li class="post-list-item"><a class="post-list-link" href="/1545051317.html">Hexo报错记录</a></li><li class="post-list-item"><a class="post-list-link" href="/1782071401.html">观《泰坦尼克号》有感</a></li><li class="post-list-item"><a class="post-list-link" href="/245441663.html">如果有一天，生命进入倒计时</a></li><li class="post-list-item"><a class="post-list-link" href="/3489101960.html">读《三体》有感</a></li><li class="post-list-item"><a class="post-list-link" href="/744267713.html">一次意外的趣味算法问题</a></li><li class="post-list-item"><a class="post-list-link" href="/4216128804.html">Linux使用笔记（Manjaro DDE）</a></li><li class="post-list-item"><a class="post-list-link" href="/2364295358.html">前端框架与库收集记录</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.baidu.com/" title="百度" target="_blank">百度</a><ul></ul><a href="https://www.google.com.hk/" title="Google" target="_blank">Google</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">DRAW LIFE.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>